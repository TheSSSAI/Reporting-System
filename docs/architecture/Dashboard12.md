[{'name': 'System Health & Performance', 'description': "Provides a real-time overview of the application's health, host system resources, and critical dependencies. Designed for operational monitoring and incident response.", 'type': 'overview', 'panels': [{'title': 'Overall Service Health', 'type': 'stat', 'metrics': ['service_uptime_status'], 'notes': 'Single-pane view of availability based on the /healthz endpoint, directly supporting REQ-OPER-DTR-003.'}, {'title': 'API Performance (Rate, Errors, Latency)', 'type': 'line_chart', 'metrics': ['rate(http_server_request_duration_seconds_count[5m])', 'rate(http_server_requests_seconds_count{status=~"5.."}[5m])', 'histogram_quantile(0.95, sum(rate(http_server_request_duration_seconds_bucket[5m])) by (le))'], 'notes': 'Visualizes key API metrics for performance and reliability, directly tied to alerts on high 5xx error rates.'}, {'title': 'Host System Resources', 'type': 'line_chart', 'metrics': ['100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)', 'node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes * 100'], 'notes': 'Monitors underlying host CPU and Memory to ensure sufficient resources for stable operation.'}, {'title': '.NET Runtime Health', 'type': 'line_chart', 'metrics': ['dotnet_gc_heap_size_bytes', 'dotnet_threadpool_queue_length'], 'notes': 'Tracks application-specific memory usage and thread pool saturation to diagnose performance bottlenecks.'}, {'title': 'Dependency Health (DB & Cache)', 'type': 'stat', 'metrics': ['postgres_connections_active', 'sum(rate(cache_hits_misses_total{result="hit"}[5m])) / sum(rate(cache_hits_misses_total[5m])) * 100'], 'notes': 'Monitors critical external dependencies (PostgreSQL and Redis) to quickly identify the root cause of service degradation.'}]}, {'name': 'Report Job & Transformation Analysis', 'description': 'Monitors the core business functionality: report job processing and the performance and security of the data transformation engine.', 'type': 'application', 'panels': [{'title': 'Report Job Throughput & Failure Rate', 'type': 'gauge', 'metrics': ['sum(rate(report_jobs_processed_total[5m]))', "sum(rate(report_jobs_processed_total{status='Failed'}[5m])) / sum(rate(report_jobs_processed_total[5m])) * 100"], 'notes': 'Tracks the primary business KPI, directly supporting alerts on high job failure rates.'}, {'title': 'Transformation Execution Duration (p95)', 'type': 'heatmap', 'metrics': ['histogram_quantile(0.95, sum(rate(transformation_script_execution_seconds_bucket[5m])) by (le, script_id))'], 'notes': 'Identifies slow-performing scripts to enforce performance benchmarks (REQ-PERF-DTR-002). Heatmap helps spot outliers across many scripts.'}, {'title': 'Transformation Memory Usage (Max)', 'type': 'line_chart', 'metrics': ['max_over_time(transformation_script_memory_usage_bytes[5m])'], 'notes': 'Tracks the memory consumption of scripts to identify resource-heavy transformations.'}, {'title': 'Transformation Sandbox Violations & Errors', 'type': 'bar_chart', 'metrics': ['sum(increase(transformation_script_events_total[5m])) by (event_type)'], 'notes': 'Security and reliability view of the Jint engine. Directly visualizes metrics for critical alerts on sandbox violations (REQ-SEC-DTR-002) and script errors.'}, {'title': 'Top 10 Failing Report Jobs', 'type': 'table', 'metrics': ["topk(10, sum(increase(report_jobs_processed_total{status='Failed'}[1h])) by (report_name))"], 'notes': 'Provides an actionable list of the most problematic reports for focused troubleshooting.'}]}]

