<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Configuration Wizard</title>
    <style>
        :root {
            /* Colors */
            --color-primary-500: #4F46E5;
            --color-primary-600: #4338CA;
            --color-primary-100: #E0E7FF;
            --color-primary-50: #EEF2FF;
            --color-slate-900: #0F172A;
            --color-slate-700: #334155;
            --color-slate-500: #64748B;
            --color-slate-400: #94A3B8;
            --color-slate-300: #CBD5E1;
            --color-slate-200: #E2E8F0;
            --color-slate-100: #F1F5F9;
            --color-slate-50: #F8FAFC;
            --color-white: #FFFFFF;
            --color-black: #000000;
            --color-danger-500: #EF4444;
            --color-danger-100: #FEE2E2;
            --color-warning-500: #F97316;
            --color-warning-100: #FFEDD5;
            --color-success-500: #22C55E;

            /* Typography */
            --font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-size-xs: 0.75rem; /* 12px */
            --font-size-sm: 0.875rem; /* 14px */
            --font-size-base: 1rem; /* 16px */
            --font-size-lg: 1.125rem; /* 18px */
            --font-size-xl: 1.25rem; /* 20px */
            --font-size-2xl: 1.5rem; /* 24px */
            --line-height-tight: 1.25;
            --line-height-normal: 1.5;
            --line-height-loose: 1.75;

            /* Spacing */
            --spacing-1: 0.25rem; /* 4px */
            --spacing-2: 0.5rem;  /* 8px */
            --spacing-3: 0.75rem; /* 12px */
            --spacing-4: 1rem;    /* 16px */
            --spacing-6: 1.5rem;  /* 24px */
            --spacing-8: 2rem;    /* 32px */
            --spacing-12: 3rem;   /* 48px */
            
            /* Borders */
            --border-radius-sm: 0.25rem;
            --border-radius-md: 0.375rem;
            --border-radius-lg: 0.5rem;
            --border-width: 1px;

            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        /* CSS Reset & Base Styles */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-family-sans);
            background-color: var(--color-slate-50);
            color: var(--color-slate-700);
            line-height: var(--line-height-normal);
            font-size: var(--font-size-base);
        }

        /* Main Screen Container */
        .screen-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: var(--spacing-8);
        }

        .wizard {
            background-color: var(--color-white);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .wizard-header {
            padding: var(--spacing-6);
            border-bottom: var(--border-width) solid var(--color-slate-200);
        }

        .wizard-header h1 {
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--color-slate-900);
        }

        .wizard-body {
            display: flex;
            padding: var(--spacing-6);
            gap: var(--spacing-8);
        }
        
        /* Stepper Component */
        .stepper {
            list-style: none;
            display: flex;
            justify-content: space-between;
            border-bottom: var(--border-width) solid var(--color-slate-200);
            padding: var(--spacing-6);
            width: 100%;
        }

        .step {
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
            font-size: var(--font-size-sm);
            color: var(--color-slate-500);
            flex: 1;
            position: relative;
        }

        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: calc(var(--spacing-4) / 2);
            left: calc(100% + var(--spacing-2));
            transform: translateX(-50%);
            width: calc(100% - var(--spacing-4) - var(--spacing-4));
            height: 2px;
            background-color: var(--color-slate-200);
        }
        
        .step__indicator {
            width: var(--spacing-6);
            height: var(--spacing-6);
            border-radius: 50%;
            background-color: var(--color-white);
            border: 2px solid var(--color-slate-300);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 600;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .step__label {
            font-weight: 500;
        }

        /* Stepper States */
        .step--complete .step__indicator {
            background-color: var(--color-primary-500);
            border-color: var(--color-primary-500);
            color: var(--color-white);
        }
        .step--complete .step__label {
            color: var(--color-primary-500);
        }
        .step--complete:not(:last-child)::after {
            background-color: var(--color-primary-500);
        }

        .step--active .step__indicator {
            border-color: var(--color-primary-500);
            color: var(--color-primary-500);
        }
        .step--active .step__label {
            color: var(--color-slate-900);
        }

        /* Wizard Content */
        .wizard-content {
            flex-grow: 1;
        }

        .wizard-step {
            display: none;
        }

        .wizard-step--active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .wizard-step h2 {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--spacing-6);
            color: var(--color-slate-900);
        }
        
        /* Form Group Component */
        .form-group {
            margin-bottom: var(--spacing-6);
        }

        .form-group__label {
            display: block;
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--color-slate-700);
            margin-bottom: var(--spacing-2);
        }
        
        .form-group__input,
        .form-group__select,
        .form-group__textarea {
            width: 100%;
            padding: var(--spacing-2) var(--spacing-3);
            border: var(--border-width) solid var(--color-slate-300);
            border-radius: var(--border-radius-md);
            font-size: var(--font-size-base);
            color: var(--color-slate-900);
            background-color: var(--color-white);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .form-group__input:focus,
        .form-group__select:focus,
        .form-group__textarea:focus {
            outline: none;
            border-color: var(--color-primary-500);
            box-shadow: 0 0 0 3px var(--color-primary-100);
        }
        
        .form-group__select {
           -webkit-appearance: none;
           -moz-appearance: none;
           appearance: none;
           background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236B7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
           background-position: right 0.5rem center;
           background-repeat: no-repeat;
           background-size: 1.5em 1.5em;
           padding-right: 2.5rem;
        }

        .form-group__textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-group__helper-text {
            font-size: var(--font-size-sm);
            color: var(--color-slate-500);
            margin-top: var(--spacing-2);
        }

        .form-group__error-text {
            font-size: var(--font-size-sm);
            color: var(--color-danger-500);
            margin-top: var(--spacing-2);
        }
        
        /* Alert Component */
        .alert {
            display: flex;
            align-items: flex-start;
            padding: var(--spacing-4);
            border-radius: var(--border-radius-md);
            font-size: var(--font-size-sm);
            margin-top: var(--spacing-4);
        }
        .alert--warning {
            background-color: var(--color-warning-100);
            color: var(--color-slate-800);
        }
        .alert__icon {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            margin-right: var(--spacing-3);
            color: var(--color-warning-500);
        }

        /* Review Step */
        .review-list {
            list-style: none;
        }
        .review-list__item {
            padding: var(--spacing-3) 0;
            border-bottom: var(--border-width) solid var(--color-slate-200);
        }
        .review-list__item:last-child {
            border-bottom: none;
        }
        .review-list__label {
            font-weight: 500;
            color: var(--color-slate-500);
        }
        .review-list__value {
            color: var(--color-slate-900);
        }

        /* Wizard Navigation */
        .wizard-nav {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-8);
            padding-top: var(--spacing-6);
            border-top: var(--border-width) solid var(--color-slate-200);
        }
        
        /* Button Component */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-2) var(--spacing-4);
            font-size: var(--font-size-sm);
            font-weight: 600;
            border-radius: var(--border-radius-md);
            border: var(--border-width) solid transparent;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s, color 0.2s;
            text-decoration: none;
        }

        .btn:focus-visible {
            outline: 2px solid var(--color-primary-500);
            outline-offset: 2px;
        }

        .btn--primary {
            background-color: var(--color-primary-500);
            color: var(--color-white);
        }

        .btn--primary:hover {
            background-color: var(--color-primary-600);
        }

        .btn--secondary {
            background-color: var(--color-white);
            color: var(--color-slate-700);
            border-color: var(--color-slate-300);
            box-shadow: var(--shadow-sm);
        }
        .btn--secondary:hover {
            background-color: var(--color-slate-50);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Responsive */
        @media (max-width: 800px) {
            .screen-container {
                padding: var(--spacing-4);
            }
            .stepper {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-4);
                border-bottom: none;
                border-right: var(--border-width) solid var(--color-slate-200);
                padding: var(--spacing-6);
            }
            .step {
                flex: 0 0 auto;
            }
            .step:not(:last-child)::after {
                display: none;
            }
            .wizard-body {
                flex-direction: column;
                padding: 0;
            }
            .wizard-content {
                padding: var(--spacing-6);
            }
        }
    </style>
</head>
<body>
    <div class="screen-container">
        <div class="wizard" id="wizard-instance">
            <header class="wizard-header">
                <h1>Create New Report</h1>
            </header>
            
            <div class="wizard-body">
                <ol class="stepper">
                    <li class="step step--active" data-step="1">
                        <div class="step__indicator">1</div>
                        <span class="step__label">Metadata</span>
                    </li>
                    <li class="step" data-step="2">
                        <div class="step__indicator">2</div>
                        <span class="step__label">Data Source</span>
                    </li>
                    <li class="step" data-step="3">
                        <div class="step__indicator">3</div>
                        <span class="step__label">Output</span>
                    </li>
                    <li class="step" data-step="4">
                        <div class="step__indicator">4</div>
                        <span class="step__label">Delivery & Schedule</span>
                    </li>
                    <li class="step" data-step="5">
                        <div class="step__indicator">5</div>
                        <span class="step__label">Review</span>
                    </li>
                </ol>

                <main class="wizard-content">
                    <form>
                        <!-- Step 1: Metadata -->
                        <div class="wizard-step wizard-step--active" data-step-content="1">
                            <h2>Step 1: Report Metadata</h2>
                            <div class="form-group">
                                <label class="form-group__label" for="reportName">Report Name</label>
                                <input type="text" id="reportName" class="form-group__input" placeholder="e.g., Daily Sales Summary" required>
                                <p class="form-group__error-text" style="display: none;">Report Name is required.</p>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label" for="reportDescription">Description (Optional)</label>
                                <textarea id="reportDescription" class="form-group__textarea" placeholder="A brief description of this report's purpose."></textarea>
                            </div>
                        </div>

                        <!-- Step 2: Data Source -->
                        <div class="wizard-step" data-step-content="2">
                            <h2>Step 2: Select Data Source</h2>
                            <div class="form-group">
                                <label class="form-group__label" for="dataConnector">Data Connector</label>
                                <select id="dataConnector" class="form-group__select" required>
                                    <option value="" disabled selected>Select a connector...</option>
                                    <option value="1">Production DB (PostgreSQL)</option>
                                    <option value="2">Salesforce Data Export (CSV)</option>
                                    <option value="3">OPC UA Machine Data</option>
                                </select>
                            </div>
                        </div>

                        <!-- Step 3: Output -->
                        <div class="wizard-step" data-step-content="3">
                            <h2>Step 3: Configure Output</h2>
                             <div class="form-group">
                                <label class="form-group__label" for="outputFormat">Output Format</label>
                                <select id="outputFormat" class="form-group__select" required>
                                    <option value="CSV">CSV</option>
                                    <option value="JSON">JSON</option>
                                    <option value="PDF">PDF</option>
                                    <option value="HTML">HTML</option>
                                    <option value="TXT">TXT</option>
                                </select>
                            </div>
                            <div class="form-group" id="template-group" style="display: none;">
                                <label class="form-group__label" for="template">Template</label>
                                <select id="template" class="form-group__select">
                                    <option value="" disabled selected>Select a template...</option>
                                    <option value="1">Standard Invoice Template</option>
                                    <option value="2">Sales Summary Layout</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-group__label" for="transformationScript">Transformation Script (Optional)</label>
                                <select id="transformationScript" class="form-group__select">
                                    <option value="none">None</option>
                                    <option value="1">Format User Data Script</option>
                                    <option value="2">Calculate Sales Totals Script</option>
                                </select>
                                <div class="alert alert--warning" id="transform-warning" style="display: none;">
                                    <svg class="alert__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                                    </svg>
                                    <span>Using a transformation script requires loading the entire dataset into memory and may increase processing time for large datasets.</span>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Delivery & Schedule -->
                        <div class="wizard-step" data-step-content="4">
                             <h2>Step 4: Delivery & Schedule</h2>
                            <div class="form-group">
                                <label class="form-group__label" for="delivery">Delivery Destinations</label>
                                <p class="form-group__helper-text">You can add delivery destinations like Email, S3, or Network Path.</p>
                                <button type="button" class="btn btn--secondary">Add Destination</button>
                                <!-- A full implementation would show a list of added destinations here -->
                            </div>
                             <div class="form-group">
                                <label class="form-group__label" for="schedule">Schedule (CRON Expression)</label>
                                <input type="text" id="schedule" class="form-group__input" placeholder="e.g., 0 8 * * * (daily at 8 AM)">
                                <p class="form-group__helper-text">Leave blank for on-demand reports only.</p>
                            </div>
                        </div>

                        <!-- Step 5: Review -->
                        <div class="wizard-step" data-step-content="5">
                             <h2>Step 5: Review & Save</h2>
                             <p class="form-group__helper-text">Please review your settings before saving the report.</p>
                             <ul class="review-list">
                                 <li class="review-list__item">
                                     <div class="review-list__label">Report Name</div>
                                     <div class="review-list__value" data-review="name">Daily Sales Summary</div>
                                 </li>
                                 <li class="review-list__item">
                                     <div class="review-list__label">Data Connector</div>
                                     <div class="review-list__value" data-review="connector">Production DB (PostgreSQL)</div>
                                 </li>
                                 <li class="review-list__item">
                                     <div class="review-list__label">Transformation</div>
                                     <div class="review-list__value" data-review="transform">Format User Data Script</div>
                                 </li>
                                  <li class="review-list__item">
                                     <div class="review-list__label">Output Format</div>
                                     <div class="review-list__value" data-review="format">PDF</div>
                                 </li>
                                 <li class="review-list__item">
                                     <div class="review-list__label">Schedule</div>
                                     <div class="review-list__value" data-review="schedule">0 8 * * *</div>
                                 </li>
                             </ul>
                        </div>
                    </form>

                    <nav class="wizard-nav">
                        <button type="button" class="btn btn--secondary" id="backBtn" style="visibility: hidden;">Back</button>
                        <button type="button" class="btn btn--primary" id="nextBtn">Next</button>
                        <button type="button" class="btn btn--primary" id="saveBtn" style="display: none;">Save Report</button>
                    </nav>
                </main>
            </div>
        </div>
    </div>

    <!-- Variants Section: This section is for documentation and shows all states statically. -->
    <div class="screen-variations" style="display: none;">
        <!-- This section would be populated with static examples of each step for documentation purposes. The interactive demo above serves this purpose dynamically. -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const wizard = document.getElementById('wizard-instance');
            const steps = Array.from(wizard.querySelectorAll('.step'));
            const stepContents = Array.from(wizard.querySelectorAll('.wizard-step'));
            const nextBtn = document.getElementById('nextBtn');
            const backBtn = document.getElementById('backBtn');
            const saveBtn = document.getElementById('saveBtn');

            let currentStep = 1;
            const totalSteps = steps.length;

            const updateWizardState = () => {
                steps.forEach((step, index) => {
                    const stepNum = index + 1;
                    step.classList.remove('step--active', 'step--complete');
                    if (stepNum < currentStep) {
                        step.classList.add('step--complete');
                    } else if (stepNum === currentStep) {
                        step.classList.add('step--active');
                    }
                });

                stepContents.forEach(content => {
                    content.classList.remove('wizard-step--active');
                });
                wizard.querySelector(`[data-step-content="${currentStep}"]`).classList.add('wizard-step--active');
                
                backBtn.style.visibility = currentStep > 1 ? 'visible' : 'hidden';
                nextBtn.style.display = currentStep < totalSteps ? 'inline-flex' : 'none';
                saveBtn.style.display = currentStep === totalSteps ? 'inline-flex' : 'none';
            };

            nextBtn.addEventListener('click', () => {
                if (currentStep < totalSteps) {
                    currentStep++;
                    updateWizardState();
                }
            });

            backBtn.addEventListener('click', () => {
                if (currentStep > 1) {
                    currentStep--;
                    updateWizardState();
                }
            });
            
            // Conditional UI logic for Step 3
            const outputFormatSelect = document.getElementById('outputFormat');
            const templateGroup = document.getElementById('template-group');
            const transformationScriptSelect = document.getElementById('transformationScript');
            const transformWarning = document.getElementById('transform-warning');

            outputFormatSelect.addEventListener('change', (e) => {
                const isTemplated = ['PDF', 'HTML'].includes(e.target.value);
                templateGroup.style.display = isTemplated ? 'block' : 'none';
            });
            
            transformationScriptSelect.addEventListener('change', (e) => {
                transformWarning.style.display = e.target.value !== 'none' ? 'flex' : 'none';
            });

            updateWizardState();
        });
    </script>
</body>
</html>