# 1 Title

Audit and Security Logging Database

# 2 Name

transformation_service_logs_db

# 3 Db Type

- document
- timeseries

# 4 Db Technology

MongoDB

# 5 Entities

## 5.1 AuditLog

### 5.1.1 Name

AuditLog

### 5.1.2 Description

Records all security-sensitive actions for compliance and tracking. Designed for immutability and high-volume writes.

### 5.1.3 Attributes

#### 5.1.3.1 ObjectId

##### 5.1.3.1.1 Name

_id

##### 5.1.3.1.2 Type

üîπ ObjectId

##### 5.1.3.1.3 Is Required

‚úÖ Yes

##### 5.1.3.1.4 Is Primary Key

‚úÖ Yes

##### 5.1.3.1.5 Size

0

##### 5.1.3.1.6 Is Unique

‚úÖ Yes

##### 5.1.3.1.7 Constraints

- Auto-generated by MongoDB, contains a timestamp component.

##### 5.1.3.1.8 Precision

0

##### 5.1.3.1.9 Scale

0

##### 5.1.3.1.10 Is Foreign Key

‚ùå No

#### 5.1.3.2.0 DateTime

##### 5.1.3.2.1 Name

timestamp

##### 5.1.3.2.2 Type

üîπ DateTime

##### 5.1.3.2.3 Is Required

‚úÖ Yes

##### 5.1.3.2.4 Is Primary Key

‚ùå No

##### 5.1.3.2.5 Size

0

##### 5.1.3.2.6 Is Unique

‚ùå No

##### 5.1.3.2.7 Constraints

- Indexed for time-series queries. Consider TTL index for automatic data archival.

##### 5.1.3.2.8 Precision

0

##### 5.1.3.2.9 Scale

0

##### 5.1.3.2.10 Is Foreign Key

‚ùå No

#### 5.1.3.3.0 UUID

##### 5.1.3.3.1 Name

userId

##### 5.1.3.3.2 Type

üîπ UUID

##### 5.1.3.3.3 Is Required

‚úÖ Yes

##### 5.1.3.3.4 Is Primary Key

‚ùå No

##### 5.1.3.3.5 Size

0

##### 5.1.3.3.6 Is Unique

‚ùå No

##### 5.1.3.3.7 Constraints

*No items available*

##### 5.1.3.3.8 Precision

0

##### 5.1.3.3.9 Scale

0

##### 5.1.3.3.10 Is Foreign Key

‚ùå No

#### 5.1.3.4.0 String

##### 5.1.3.4.1 Name

sourceIpAddress

##### 5.1.3.4.2 Type

üîπ String

##### 5.1.3.4.3 Is Required

‚ùå No

##### 5.1.3.4.4 Is Primary Key

‚ùå No

##### 5.1.3.4.5 Size

45

##### 5.1.3.4.6 Is Unique

‚ùå No

##### 5.1.3.4.7 Constraints

*No items available*

##### 5.1.3.4.8 Precision

0

##### 5.1.3.4.9 Scale

0

##### 5.1.3.4.10 Is Foreign Key

‚ùå No

#### 5.1.3.5.0 String

##### 5.1.3.5.1 Name

actionType

##### 5.1.3.5.2 Type

üîπ String

##### 5.1.3.5.3 Is Required

‚úÖ Yes

##### 5.1.3.5.4 Is Primary Key

‚ùå No

##### 5.1.3.5.5 Size

100

##### 5.1.3.5.6 Is Unique

‚ùå No

##### 5.1.3.5.7 Constraints

*No items available*

##### 5.1.3.5.8 Precision

0

##### 5.1.3.5.9 Scale

0

##### 5.1.3.5.10 Is Foreign Key

‚ùå No

#### 5.1.3.6.0 String

##### 5.1.3.6.1 Name

entityType

##### 5.1.3.6.2 Type

üîπ String

##### 5.1.3.6.3 Is Required

‚ùå No

##### 5.1.3.6.4 Is Primary Key

‚ùå No

##### 5.1.3.6.5 Size

100

##### 5.1.3.6.6 Is Unique

‚ùå No

##### 5.1.3.6.7 Constraints

*No items available*

##### 5.1.3.6.8 Precision

0

##### 5.1.3.6.9 Scale

0

##### 5.1.3.6.10 Is Foreign Key

‚ùå No

#### 5.1.3.7.0 String

##### 5.1.3.7.1 Name

entityId

##### 5.1.3.7.2 Type

üîπ String

##### 5.1.3.7.3 Is Required

‚ùå No

##### 5.1.3.7.4 Is Primary Key

‚ùå No

##### 5.1.3.7.5 Size

0

##### 5.1.3.7.6 Is Unique

‚ùå No

##### 5.1.3.7.7 Constraints

*No items available*

##### 5.1.3.7.8 Precision

0

##### 5.1.3.7.9 Scale

0

##### 5.1.3.7.10 Is Foreign Key

‚ùå No

#### 5.1.3.8.0 String

##### 5.1.3.8.1 Name

outcome

##### 5.1.3.8.2 Type

üîπ String

##### 5.1.3.8.3 Is Required

‚úÖ Yes

##### 5.1.3.8.4 Is Primary Key

‚ùå No

##### 5.1.3.8.5 Size

20

##### 5.1.3.8.6 Is Unique

‚ùå No

##### 5.1.3.8.7 Constraints

- ENUM('Success', 'Failure')

##### 5.1.3.8.8 Precision

0

##### 5.1.3.8.9 Scale

0

##### 5.1.3.8.10 Is Foreign Key

‚ùå No

#### 5.1.3.9.0 Object

##### 5.1.3.9.1 Name

changeDetails

##### 5.1.3.9.2 Type

üîπ Object

##### 5.1.3.9.3 Is Required

‚ùå No

##### 5.1.3.9.4 Is Primary Key

‚ùå No

##### 5.1.3.9.5 Size

0

##### 5.1.3.9.6 Is Unique

‚ùå No

##### 5.1.3.9.7 Constraints

- Nested BSON object detailing the change, e.g., { oldValue: '...', newValue: '...' }.

##### 5.1.3.9.8 Precision

0

##### 5.1.3.9.9 Scale

0

##### 5.1.3.9.10 Is Foreign Key

‚ùå No

### 5.1.4.0.0 Primary Keys

- _id

### 5.1.5.0.0 Unique Constraints

*No items available*

### 5.1.6.0.0 Indexes

#### 5.1.6.1.0 SingleField

##### 5.1.6.1.1 Name

idx_auditlog_timestamp_desc

##### 5.1.6.1.2 Columns

- timestamp: -1

##### 5.1.6.1.3 Type

üîπ SingleField

#### 5.1.6.2.0 Compound

##### 5.1.6.2.1 Name

idx_auditlog_entity

##### 5.1.6.2.2 Columns

- entityType
- entityId

##### 5.1.6.2.3 Type

üîπ Compound

#### 5.1.6.3.0 Compound

##### 5.1.6.3.1 Name

idx_auditlog_user_action_time

##### 5.1.6.3.2 Columns

- userId
- actionType
- timestamp: -1

##### 5.1.6.3.3 Type

üîπ Compound

## 5.2.0.0.0 SecurityViolationLog

### 5.2.1.0.0 Name

SecurityViolationLog

### 5.2.2.0.0 Description

Dedicated log for script executions that violate sandbox constraints (e.g., timeout, memory). Crucial for security monitoring and alerting.

### 5.2.3.0.0 Attributes

#### 5.2.3.1.0 ObjectId

##### 5.2.3.1.1 Name

_id

##### 5.2.3.1.2 Type

üîπ ObjectId

##### 5.2.3.1.3 Is Required

‚úÖ Yes

##### 5.2.3.1.4 Is Primary Key

‚úÖ Yes

##### 5.2.3.1.5 Size

0

##### 5.2.3.1.6 Is Unique

‚úÖ Yes

##### 5.2.3.1.7 Constraints

- Auto-generated by MongoDB.

##### 5.2.3.1.8 Precision

0

##### 5.2.3.1.9 Scale

0

##### 5.2.3.1.10 Is Foreign Key

‚ùå No

#### 5.2.3.2.0 DateTime

##### 5.2.3.2.1 Name

timestamp

##### 5.2.3.2.2 Type

üîπ DateTime

##### 5.2.3.2.3 Is Required

‚úÖ Yes

##### 5.2.3.2.4 Is Primary Key

‚ùå No

##### 5.2.3.2.5 Size

0

##### 5.2.3.2.6 Is Unique

‚ùå No

##### 5.2.3.2.7 Constraints

- Primary index for time-based queries and alerting.

##### 5.2.3.2.8 Precision

0

##### 5.2.3.2.9 Scale

0

##### 5.2.3.2.10 Is Foreign Key

‚ùå No

#### 5.2.3.3.0 UUID

##### 5.2.3.3.1 Name

jobExecutionLogId

##### 5.2.3.3.2 Type

üîπ UUID

##### 5.2.3.3.3 Is Required

‚úÖ Yes

##### 5.2.3.3.4 Is Primary Key

‚ùå No

##### 5.2.3.3.5 Size

0

##### 5.2.3.3.6 Is Unique

‚ùå No

##### 5.2.3.3.7 Constraints

*No items available*

##### 5.2.3.3.8 Precision

0

##### 5.2.3.3.9 Scale

0

##### 5.2.3.3.10 Is Foreign Key

‚ùå No

#### 5.2.3.4.0 UUID

##### 5.2.3.4.1 Name

transformationScriptVersionId

##### 5.2.3.4.2 Type

üîπ UUID

##### 5.2.3.4.3 Is Required

‚úÖ Yes

##### 5.2.3.4.4 Is Primary Key

‚ùå No

##### 5.2.3.4.5 Size

0

##### 5.2.3.4.6 Is Unique

‚ùå No

##### 5.2.3.4.7 Constraints

*No items available*

##### 5.2.3.4.8 Precision

0

##### 5.2.3.4.9 Scale

0

##### 5.2.3.4.10 Is Foreign Key

‚ùå No

#### 5.2.3.5.0 String

##### 5.2.3.5.1 Name

violationType

##### 5.2.3.5.2 Type

üîπ String

##### 5.2.3.5.3 Is Required

‚úÖ Yes

##### 5.2.3.5.4 Is Primary Key

‚ùå No

##### 5.2.3.5.5 Size

50

##### 5.2.3.5.6 Is Unique

‚ùå No

##### 5.2.3.5.7 Constraints

- Value from set: 'TIMEOUT', 'MEMORY_LIMIT', 'STATEMENT_COUNT', 'CLR_ACCESS_DENIED'

##### 5.2.3.5.8 Precision

0

##### 5.2.3.5.9 Scale

0

##### 5.2.3.5.10 Is Foreign Key

‚ùå No

#### 5.2.3.6.0 String

##### 5.2.3.6.1 Name

violationDetails

##### 5.2.3.6.2 Type

üîπ String

##### 5.2.3.6.3 Is Required

‚úÖ Yes

##### 5.2.3.6.4 Is Primary Key

‚ùå No

##### 5.2.3.6.5 Size

255

##### 5.2.3.6.6 Is Unique

‚ùå No

##### 5.2.3.6.7 Constraints

- Details of the violation, e.g., 'Exceeded 64MB limit' or 'Execution timed out after 30s'

##### 5.2.3.6.8 Precision

0

##### 5.2.3.6.9 Scale

0

##### 5.2.3.6.10 Is Foreign Key

‚ùå No

### 5.2.4.0.0 Primary Keys

- _id

### 5.2.5.0.0 Unique Constraints

*No items available*

### 5.2.6.0.0 Indexes

#### 5.2.6.1.0 SingleField

##### 5.2.6.1.1 Name

idx_secviolation_timestamp_desc

##### 5.2.6.1.2 Columns

- timestamp: -1

##### 5.2.6.1.3 Type

üîπ SingleField

#### 5.2.6.2.0 Compound

##### 5.2.6.2.1 Name

idx_secviolation_script_time

##### 5.2.6.2.2 Columns

- transformationScriptVersionId
- timestamp: -1

##### 5.2.6.2.3 Type

üîπ Compound

#### 5.2.6.3.0 Compound

##### 5.2.6.3.1 Name

idx_secviolation_type_time

##### 5.2.6.3.2 Columns

- violationType
- timestamp: -1

##### 5.2.6.3.3 Type

üîπ Compound

